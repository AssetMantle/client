name: Peristence

on:
  push:
    branches: [master]

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - name: SBT action test
        id: sbt
        uses: lokkju/github-action-sbt@11-1.3.0-2.12.10
        with:
          commands: dist
      - name: Operations
        uses: alinz/ssh-scp-action@master
        with:
          key: ${{ secrets.STAGING_SSH_KEY }}
          host: ${{ secrets.STAGING_HOST }}
          port: 22
          user: ${{ secrets.STAGING_USERNAME }}
          # then run these commands
          ssh_after: |
            ${{ secrets.STAGING_SCRIPT_PATH }}
