@import controllers.actions.LoginState
@import views.html.base._
@import views.html.component.master._
@import models.master.Organization
@import models.master.OrganizationKYC

@(organization: Organization, organizationKYCs: Seq[OrganizationKYC])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState = null)

<legend class="cmuk-legend">
    @Messages(constants.View.ORGANIZATION): @organization.id
</legend>
<hr>
<div class="infoBlock infoBlockHeight">
    <div class="infoBlockItem">
    <div class="cmuk-text-left title">@Messages(constants.View.ORGANIZATION_DETAILS):</div>
    @commonTextInfo(constants.View.ORGANIZATION_ID, organization.id)
    @commonTextInfo(constants.View.ZONE_ID, organization.zoneID)
    @commonTextInfo(constants.View.ACCOUNT_ID, organization.accountID)
    @commonTextInfo(constants.View.NAME, organization.name)
    @commonTextInfo(constants.View.ABBREVIATION, organization.abbreviation.getOrElse(""))
    @commonDateInfo(constants.View.ESTABLISHMENT_DATE, organization.establishmentDate)
    @commonTextInfo(constants.View.EMAIL_ADDRESS, organization.email)
    <div class="cmuk-text-left title">@Messages(constants.FormField.REGISTERED_ADDRESS.name):</div>
    @streetAddress(organization.registeredAddress)
    <div class="cmuk-text-left title">@Messages(constants.FormField.POSTAL_ADDRESS.name): </div>
    @streetAddress(organization.postalAddress)
    </div>
    <div class="infoBlockItem">
        <div class="infoBlockItemRight">
    <div class="cmuk-text-left title">@Messages(constants.View.ORGANIZATION_UBO_DETAIL):</div>
    @for(ubo <- organization.ubos.data) {
        @commonTextInfo(constants.View.PERSON_NAME, ubo.personName)
        @commonDoubleInfo(constants.View.SHARE_PERCENTAGE, ubo.sharePercentage)
        @commonTextInfo(constants.View.RELATIONSHIP, ubo.relationship)
        @commonTextInfo(constants.View.TITLE, ubo.title)
    }
    <div class="cmuk-text-left title">@Messages(constants.View.DOCUMENTS):</div>
    @organizationKYCs.map { organizationKYC =>
        @component.master.commonDocumentViewer(organizationKYC) {
            @routes.FileController.zoneAccessedOrganizationKYCFile(organizationID = organizationKYC.id, fileName = organizationKYC.fileName, documentType = organizationKYC.documentType)
        } {
            <a href="@routes.FileController.zoneAccessedOrganizationKYCFile(organizationID = organizationKYC.id, fileName = organizationKYC.fileName, documentType = organizationKYC.documentType)">@Messages(organizationKYC.documentType)</a>
        } {
            @commonBooleanInfo(constants.View.STATUS, organizationKYC.status)
        }
    }
        </div>
    </div>
</div>