@import controllers.actions.LoginState
@import views.html.base._
@import views.html.component.master._
@import models.master.Organization
@import models.master.OrganizationKYC

@import models.master.OrganizationUBO
@(organization: Organization, organizationKYCs: Seq[OrganizationKYC], ubos: Seq[OrganizationUBO])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState = null)

<legend class="cmuk-legend">
        @Messages(constants.View.ORGANIZATION): @organization.id
</legend>
<hr>
<div class="modalInfoBlock">
        <div class="title cmuk-text-left">@Messages(constants.View.ORGANIZATION_DETAILS)</div>
        @commonTextInfo(constants.View.ORGANIZATION_ID, organization.id)
        @commonTextInfo(constants.View.ZONE_ID, organization.zoneID)
        @commonTextInfo(constants.View.ACCOUNT_ID, organization.accountID)
        @commonTextInfo(constants.View.NAME, organization.name)
        @commonTextInfo(constants.View.ABBREVIATION, organization.abbreviation.getOrElse(""))
        @commonDateInfo(constants.View.ESTABLISHMENT_DATE, organization.establishmentDate)
        @commonTextInfo(constants.View.EMAIL_ADDRESS, organization.email)

        <div class="title cmuk-text-left">@Messages(constants.FormField.REGISTERED_ADDRESS.name) </div>
        @streetAddress(organization.registeredAddress)
        <div class="title cmuk-text-left">@Messages(constants.FormField.POSTAL_ADDRESS.name) </div>
            @streetAddress(organization.postalAddress)

        <div class="title cmuk-text-left">@Messages(constants.View.ORGANIZATION_UBO_DETAIL)</div>
        @for(ubo <- ubos) {
                @commonTextInfo(constants.View.PERSON_FIRST_NAME, ubo.firstName)
                @commonTextInfo(constants.View.PERSON_LAST_NAME, ubo.lastName)
                @commonDoubleInfo(constants.View.SHARE_PERCENTAGE, ubo.sharePercentage)
                @commonTextInfo(constants.View.RELATIONSHIP, ubo.relationship)
                @commonTextInfo(constants.View.TITLE, ubo.title)
                @commonBooleanInfo(constants.View.STATUS, ubo.status)
                @commonFormButton(constants.Form.MEMBER_CHECK_MEMBER_SCAN, 'parameters -> s"'${ubo.id}','${ubo.firstName}','${ubo.lastName}'")
        }
        <div class="title cmuk-text-left">@Messages(constants.View.DOCUMENTS)</div>
        @organizationKYCs.map { organizationKYC =>
                @component.master.commonDocumentViewer(organizationKYC) {
                        @routes.FileController.zoneAccessedOrganizationKYCFile(organizationID = organizationKYC.id, fileName = organizationKYC.fileName, documentType = organizationKYC.documentType)
                } {
                        @commonLink(organizationKYC.documentType, routes.FileController.zoneAccessedOrganizationKYCFile(organizationID = organizationKYC.id, fileName = organizationKYC.fileName, documentType = organizationKYC.documentType))
                } {
                        @commonBooleanInfo(constants.View.STATUS, organizationKYC.status)
                }
        }
</div>