@import controllers.actions.LoginState
@import models.master.Organization
@import models.master.OrganizationUBO
@import views.html.base._
@import models.master.OrganizationKYC
@import views.html.component.master.streetAddress

@(organization: Organization, organizationKYCs: Seq[OrganizationKYC], ubos: Seq[OrganizationUBO])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState = null)

<legend class="cmuk-legend">
    @Messages(constants.View.ORGANIZATION_REQUEST): @organization.id
</legend>
<hr>
<div class="title cmuk-text-left">@Messages(constants.View.ORGANIZATION_DETAILS): </div>
    @commonTextInfo(constants.View.ORGANIZATION_ID, organization.id)
    @commonTextInfo(constants.View.ZONE_ID, organization.zoneID)
    @commonTextInfo(constants.View.ACCOUNT_ID, organization.accountID)
    @commonTextInfo(constants.View.NAME, organization.name)
    @commonTextInfo(constants.View.ABBREVIATION, organization.abbreviation.getOrElse(""))
    @commonDateInfo(constants.View.ESTABLISHMENT_DATE, organization.establishmentDate)
    @commonTextInfo(constants.View.EMAIL_ADDRESS, organization.email)
<div class="title cmuk-text-left">@Messages(constants.FormField.REGISTERED_ADDRESS.name) :</div>
@streetAddress(organization.registeredAddress)
<div class="title cmuk-text-left">@Messages(constants.FormField.POSTAL_ADDRESS.name) : </div>
@streetAddress(organization.postalAddress)
<div class="title cmuk-text-left">@Messages(constants.View.ORGANIZATION_UBO_DETAIL): </div>
@for(ubo <- ubos) {
    @commonTextInfo(constants.View.PERSON_FIRST_NAME, ubo.firstName)
    @commonTextInfo(constants.View.PERSON_LAST_NAME, ubo.lastName)
    @commonDoubleInfo(constants.View.SHARE_PERCENTAGE, ubo.sharePercentage)
    @commonTextInfo(constants.View.RELATIONSHIP, ubo.relationship)
    @commonTextInfo(constants.View.TITLE, ubo.title)
    @commonBooleanInfo(constants.View.STATUS, ubo.status)
    @commonFormButton(constants.Form.MEMBER_CHECK_MEMBER_SCAN, 'parameters -> s"'${ubo.id}','${ubo.firstName}','${ubo.lastName}'")
}
<div class="title cmuk-text-left">@Messages(constants.View.DOCUMENTS):</div>
    @organizationKYCs.map { organizationKYC =>
        @component.master.commonDocumentViewer(organizationKYC) {
            @routes.FileController.zoneAccessedOrganizationKYCFile(organizationKYC.id, organizationKYC.fileName, organizationKYC.documentType)
        } {
            <a href="@routes.FileController.zoneAccessedOrganizationKYCFile(organizationKYC.id, organizationKYC.fileName, organizationKYC.documentType)">@Messages(organizationKYC.documentType)</a>
        } {
            @views.html.component.master.updateOrganizationKYCDocumentStatus(organizationKYC = organizationKYC)
        }
    }

<span class="cmuk-text-left">@Messages(constants.View.PLEASE_APPROVE_ALL_KYC_DOCUMENTS)</span>
<br>
    @commonFormButton(constants.Form.MEMBER_CHECK_CORPORATE_SCAN, 'parameters -> s"'${organization.id}', '${organization.name}'")

    @*
@commonModalButton(constants.View.APPROVE, routes.javascript.BackgroundCheckController.uploadOrUpdateOrganizationBackgroundCheckFile, 'class -> "cmuk-button-success cmuk-button-small", 'parameters -> s"'${organization.id}'")
*@
    @commonFormButton(constants.Form.ACCEPT_ORGANIZATION_REQUEST, 'class -> "cmuk-button-success cmuk-button-small", 'parameters -> s"'${organization.id}'")
    @commonFormButton(constants.Form.REJECT_ORGANIZATION_REQUEST, 'class -> "cmuk-button-danger cmuk-button-small", 'parameters -> s"'${organization.id}'")