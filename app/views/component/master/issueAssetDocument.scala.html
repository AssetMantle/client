
@import controllers.actions.LoginState
@import views.html.base._
@import views.companion.master.IssueAssetOBL
@import models.masterTransaction.AssetFile

@(id: String, files: Seq[AssetFile])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, flash: Flash, loginState: LoginState = null)

<div class="centerText">
    @for(documentType <- constants.File.TRADER_ASSET_DOCUMENT_TYPES_UPLOAD_PAGE) {
        <div id="upload@documentType">
@*            <button type="button" class="cmuk-button cmuk-button-primary" onclick="getForm(jsRoutes.controllers.FileController.uploadTraderAssetForm('@documentType', '@id'))">@Messages(constants.Form.UPLOAD) @Messages(documentType)</button>*@
            @commonModalButton(constants.Form.UPLOAD + " " + documentType,routes.javascript.FileController.uploadTraderAssetForm,'parameters -> s"'${documentType}','${id}'")
        </div>
    }
    @for(file <- files) {
        @component.master.commonDocumentViewer(file) {
            @routes.FileController.tradingFile(id, file.fileName, file.documentType)
        } {
            <a href="@routes.FileController.tradingFile(id, file.fileName, file.documentType)" target="_blank">@Messages(file.documentType)</a>
        } {
@*            <button type="button" class="cmuk-button cmuk-button-primary" onclick="getForm(jsRoutes.controllers.FileController.updateTraderAssetForm('@file.documentType', '@id'))">@Messages(constants.Form.UPDATE) @Messages(file.documentType)</button>*@
            @commonModalButton(constants.Form.UPDATE + " " +file.documentType ,routes.javascript.FileController.uploadTraderAssetForm,'parameters -> s"'${file.documentType}','${id}'")
            <script>hideElement('upload@file.documentType')</script>
        }
    }
</div>

@if(constants.File.TRADER_ASSET_DOCUMENT_TYPES_UPLOAD_PAGE_NEXT.forall(files.map(_.documentType).contains)) {
@*    <button id="issueAssetDocuments" onclick="getForm(jsRoutes.controllers.IssueAssetController.issueAssetRequestForm('@id'))">@Messages(constants.Form.NEXT)</button>*@
    @commonModalButton(constants.Form.NEXT,routes.javascript.IssueAssetController.issueAssetRequestForm,'parameters -> s"'${id}'")
}