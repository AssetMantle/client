@import controllers.actions.LoginState
@import views.html.base._
@import models.master.{Asset, Negotiation}

@(negotiation: Negotiation, asset: Asset)(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState)

<div id='@Seq(negotiation.id, "TermsView").mkString("")'>
    <div class="tradeTerms">
        <div class="traderCommodity">
            <span class="commodityImage"><img src="@routes.Assets.versioned("images/icons/" + asset.assetType + ".svg")"></span><span class="tradeName">@asset.assetType</span>
        </div>
        <div class="terms">
            <div class="cmuk-flex cmuk-flex-between">
                <div class="title">@Messages(constants.View.ASSET_DETAILS)</div>
            </div>
            <div class="sellerTerm">
                <div class="cmuk-flex">
                    <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-description")"/></svg></span>
                    @commonTextInfo(constants.View.ASSET_DESCRIPTION, negotiation.assetDescription)
                </div>
                <div>
                @if(negotiation.buyerAcceptedAssetDescription){
                    @Messages(constants.View.ACCEPTED)
                } else{
                    @Messages(constants.View.PENDING)
                }
                </div>
            </div>
            <div class="sellerTerm">
                <div class="cmuk-flex">
                    <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-contract-price")"/></svg></span>
                    @commonIntInfo(constants.View.PRICE, negotiation.price)
                </div>
                <div>
                @if(negotiation.buyerAcceptedPrice){
                    @Messages(constants.View.ACCEPTED)
                } else{
                    @Messages(constants.View.PENDING)
                }
                </div>
            </div>
            <div class="sellerTerm">
                <div class="cmuk-flex">
                    <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-quantity")"/></svg></span>
                    @commonTextInfo(constants.View.QUANTITY, Seq(negotiation.quantity.toString, negotiation.quantityUnit).mkString(" "))
                </div>
                <div>
                @if(negotiation.buyerAcceptedQuantity){
                    @Messages(constants.View.ACCEPTED)
                } else{
                    @Messages(constants.View.PENDING)
                }
                </div>
            </div>

            <div class="cmuk-flex cmuk-flex-between">
                <div class="title">@Messages(constants.View.ASSET_OTHER_DETAILS)</div>
            </div>
            <div class="sellerTerm">
                <div>
                    <div class="cmuk-flex">
                        <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-port")"/></svg></span>
                        @commonTextInfo(constants.View.LOAD_PORT, negotiation.assetOtherDetails.shippingDetails.portOfLoading)
                    </div>
                    <div class="cmuk-flex">
                        <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-port")"/></svg></span>
                        @commonTextInfo(constants.View.DISCHARGE_PORT, negotiation.assetOtherDetails.shippingDetails.portOfDischarge)
                    </div>
                    <div class="cmuk-flex">
                        <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-shipment-period")"/></svg></span>
                        @commonIntInfo(constants.View.SHIPMENT_PERIOD, negotiation.assetOtherDetails.shippingDetails.shippingPeriod)
                    </div>
                </div>
                <div>
                @if(negotiation.buyerAcceptedAssetOtherDetails){
                    @Messages(constants.View.ACCEPTED)
                } else{
                    @Messages(constants.View.PENDING)
                }
                </div>
            </div>

            <hr>

            <div class="cmuk-flex cmuk-flex-between">
                <div class="title">@Messages(constants.View.PAYMENT_TERMS)</div>
            </div>
            <div class="sellerTerm">
                <div>
                    <div class="cmuk-flex">
                        <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-advance-payment")"/></svg></span>
                        @commonBooleanInfo(constants.View.ADVANCE_PAYMENT, Option(negotiation.paymentTerms.advancePayment))
                    </div>
                    <div class="cmuk-flex">
                        <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-advance-payment")"/></svg></span>
                        @commonDoubleInfo(constants.View.ADVANCE_PERCENTAGE, negotiation.paymentTerms.advancePercentage.getOrElse(0.0))
                    </div>
                    <div class="cmuk-flex">
                        <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-credit-terms")"/></svg></span>
                        @commonBooleanInfo(constants.View.CREDIT, Option(negotiation.paymentTerms.credit))
                    </div>
                    <div class="subTerms">
                    @if(negotiation.paymentTerms.tentativeDate.isEmpty) {
                        <p>@Messages(constants.View.TENURE)
                            - <span class="cmuk-text-bold">@negotiation.paymentTerms.tenure.getOrElse(0)
                                Days</span></p>
                        <p>@Messages(constants.View.REFERENCE)
                            - <span class="cmuk-text-bold">@negotiation.paymentTerms.reference.getOrElse("")</span></p>
                    } else {
                        <p>@Messages(constants.View.TENTATIVE_DATE) - <span class="cmuk-text-bold">
                        @negotiation.paymentTerms.tentativeDate match {
                            case Some(date) => {
                                @date
                            }
                            case None => {}
                        }
                        </span></p>
                    }
                    </div>
                </div>
                <div>
                @if(negotiation.buyerAcceptedPaymentTerms){
                    @Messages(constants.View.ACCEPTED)
                } else{
                    @Messages(constants.View.PENDING)
                }
                </div>
            </div>

            <hr>

            <div class="cmuk-flex cmuk-flex-between">
                <div class="title"> @Messages(constants.View.DOCUMENT_LIST)</div>
            </div>
            <div class="sellerTerm">
                <div>
                    @negotiation.documentList.assetDocuments.map{assetDocument=>
                        <div>
                            <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-document")"/></svg></span>
                            @Messages(assetDocument)
                        </div>
                    }
                    @negotiation.documentList.negotiationDocuments.map{negotiationDocument=>
                        <div>
                            <span class="termIcon"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-document")"/></svg></span>
                            @Messages(negotiationDocument)
                        </div>
                    }
                </div>
                <div>
                @if(negotiation.buyerAcceptedDocumentList){
                    @Messages(constants.View.ACCEPTED)
                } else{
                    @Messages(constants.View.PENDING)
                }
                </div>
            </div>
        </div>
    </div>
</div>
