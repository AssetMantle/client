@import controllers.actions.LoginState
@import models.common.Serializable._
@import views.html.base._
@(asset: masterTransaction.IssueAssetRequest, files: Seq[masterTransaction.AssetFile],status:String="")(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, flash: Flash, loginState: LoginState = null)

<div>
    @commonTextInfo(constants.FormField.ASSET_TYPE.name, asset.assetType)
    @commonTextInfo(constants.FormField.QUANTITY_UNIT.name, asset.quantityUnit)
    @commonIntInfo(constants.FormField.ASSET_QUANTITY.name, asset.assetQuantity)
    @commonIntInfo(constants.FormField.ASSET_PRICE.name, asset.assetPrice)

    @if(status != "") {
        @commonTextInfo(constants.Form.PEG_HASH, asset.pegHash.getOrElse(""))
        @commonTextInfo(constants.Form.STATUS, status)
    }else{
        @if(asset.completionStatus) {
            @if(asset.verificationStatus.isEmpty){
                @commonTextInfo(constants.Form.STATUS, constants.Status.Asset.REQUESTED)
            }else{
                @commonTextInfo(constants.Form.STATUS, constants.Status.Asset.FAILED)
            }
        } else{
            @commonTextInfo(constants.Form.STATUS, constants.Status.Asset.INCOMPLETE_DETAILS)
        }
    }
    <button type="button" class="cmuk-button cmuk-button-primary cmuk-button-small showHide">@Messages(constants.Form.SHOW_HIDE)</button>
</div>
<div class="hidden">
    @asset.takerAddress match{
    case Some(takerAddress) => {
        @commonTextInfo(constants.FormField.TAKER_ADDRESS.name, asset.takerAddress.getOrElse(""))
    }
    case None => {}
    }
    @commonTextInfo(constants.FormField.PHYSICAL_DOCUMENTS_HANDLED_VIA.name, asset.physicalDocumentsHandledVia)
    @commonTextInfo(constants.FormField.COMDEX_PAYMENT_TERMS.name, asset.paymentTerms)

    <div class="cmuk-text-left title">@Messages(constants.Form.SHIPMENT_DETAILS)</div>

    @commonTextInfo(constants.FormField.COMMODITY_NAME.name, asset.shipmentDetails.commodityName)
    @commonTextInfo(constants.FormField.QUALITY.name, asset.shipmentDetails.quality)
    @commonTextInfo(constants.FormField.DELIVERY_TERM.name, asset.shipmentDetails.deliveryTerm)
    @commonTextInfo(constants.FormField.TRADE_TYPE.name, asset.shipmentDetails.tradeType)
    @commonTextInfo(constants.FormField.PORT_OF_LOADING.name, asset.shipmentDetails.portOfLoading)
    @commonTextInfo(constants.FormField.PORT_OF_DISCHARGE.name, asset.shipmentDetails.portOfDischarge)
    @commonDateInfo(constants.FormField.SHIPMENT_DATE.name, asset.shipmentDetails.shipmentDate)
    @for(file <- files) {
        @component.master.commonDocumentViewer(file) {
            @routes.FileController.tradingFile(file.id, file.fileName, file.documentType)
        } {
            <a href="@routes.FileController.tradingFile(file.id, file.fileName, file.documentType)">@Messages(file.documentType)</a>
        } {
            @file.documentContent match {
                case Some(oblContent :OBL) => {
                    @commonTextInfo(constants.FormField.BILL_OF_LADING_NUMBER.name, oblContent.billOfLadingID)

                    @commonTextInfo(constants.FormField.PORT_OF_LOADING.name, oblContent.portOfLoading)
                    @commonTextInfo(constants.FormField.SHIPPER_NAME.name, oblContent.shipperName)
                    @commonTextInfo(constants.FormField.SHIPPER_ADDRESS.name, oblContent.shipperAddress)

                    @commonTextInfo(constants.FormField.NOTIFY_PARTY_NAME.name, oblContent.notifyPartyName)
                    @commonDateInfo(constants.FormField.SHIPMENT_DATE.name, oblContent.dateOfShipping)
                    @commonTextInfo(constants.FormField.DELIVERY_TERM.name, oblContent.deliveryTerm)

                    @commonIntInfo(constants.FormField.ASSET_QUANTITY.name, oblContent.weightOfConsignment)
                    @commonIntInfo(constants.FormField.ASSET_PRICE.name, oblContent.declaredAssetValue)

                }
                case Some(invoiceContent :Invoice) => {
                    @commonTextInfo(constants.FormField.INVOICE_NUMBER.name, invoiceContent.invoiceNumber)
                    @commonDateInfo(constants.FormField.INVOICE_DATE.name, invoiceContent.invoiceDate)
                }
                case Some(content) => {
                    <span>content</span>
                }
                case None => {}
            }
        }
    }
</div>
