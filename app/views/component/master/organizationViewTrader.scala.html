@import controllers.actions.LoginState
@import models.blockchain.{Asset, Fiat, Negotiation, Order, TraderFeedbackHistory}
@import models.master.Trader

@(trader: Trader, assets: Seq[Asset], fiats: Seq[Fiat], buyOrders: Seq[Order], sellOrders: Seq[Order], buyNegotiations: Seq[Negotiation], sellNegotiations: Seq[Negotiation], traderFeedbackHistories: Seq[TraderFeedbackHistory])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState = null)
<div class="latest_card-header latest_card-header-primary text-center">
    <h4 class="latest_card-title">@Messages(constants.Form.TRADER_DETAILS)</h4>
</div>
<div id="traderDetails@trader.id">
    <span class="red">@Messages(constants.Form.TRADER_ID)</span>: @trader.id<br>
    <span class="red">@Messages(constants.Form.NAME)</span>: @trader.name<br>
    <span class="red">@Messages(constants.Form.ACCOUNT_ID)</span>: @trader.accountID<br>
    <span class="red">@Messages(constants.Form.COMPLETION_STATUS)</span>: @trader.completionStatus<br>
    <span class="red">@Messages(constants.Form.VERIFIED_STATUS)</span>
    : @trader.verificationStatus.getOrElse(Messages(constants.Form.PENDING))<br>
    <span class="red">@Messages(constants.Form.RATING)</span>
    : @traderFeedbackHistories.map(_.rating.toInt).sum.toString<br>
</div> <br>

@if(trader.verificationStatus.getOrElse(false)) {
    <div id = "traderAssetDetails@trader.id"><span class="centerText">@Messages(constants.Form.ASSETS): </span><br>
        @for(asset <- assets) {
            <div class="flexItem box thirdBox lightBlue">
                <div class="leftText">
                    <span class="red">@Messages(constants.Form.PEG_HASH)</span>: @asset.pegHash <br>
                    <span class="red">@Messages(constants.Form.DOCUMENT_HASH)</span>: @asset.documentHash <br>
                    <span class="red">@Messages(constants.Form.ASSET_TYPE)</span>: @asset.assetType <br>
                    <span class="red">@Messages(constants.Form.ASSET_QUANTITY)</span>: @asset.assetQuantity <br>
                    <span class="red">@Messages(constants.Form.ASSET_PRICE)</span>: @asset.assetPrice <br>
                    <span class="red">@Messages(constants.Form.QUANTITY_UNIT)</span>: @asset.quantityUnit <br>
                    <span class="red">@Messages(constants.Form.MODERATED)</span>: @asset.moderated <br>
                    <span class="red">@Messages(constants.Form.TAKER_ADDRESS)</span>: @asset.takerAddress <br>
                    <span class="red">@Messages(constants.Form.LOCKED)</span>: @asset.locked <br>
                </div>
            </div>
        }
    </div>
    <br>

    <div id="traderFiatDetail"><span class="centerText">@Messages(constants.Form.TOTAL_FIATS)
        : @fiats.map(_.transactionAmount.toInt).sum.toString</span><br>
        @for(fiat <- fiats) {
            <div class="flexItem box thirdBox lightBlue">
                <div class="leftText">
                    <span class="red">@Messages(constants.Form.PEG_HASH)</span>: @fiat.pegHash <br>
                    <span class="red">@Messages(constants.Form.TRANSACTION_ID)</span>: @fiat.transactionID <br>
                    <span class="red">@Messages(constants.Form.TRANSACTION_AMOUNT)</span>: @fiat.transactionAmount <br>
                    <span class="red">@Messages(constants.Form.REDEEM_AMOUNT)</span>: @fiat.redeemedAmount <br>
                </div>
            </div>
        }
    </div>
    <br>

    <div id="traderNegotiationDetails@trader.id">
        <span class="centerText">@Messages(constants.Form.ON_GOING_BUY_NEGOTIATIONS): </span><br>
        @for(buyNegotiation <- buyNegotiations) {
            <div class="flexItem box thirdBox lightBlue">
                <div class="leftText">
                    <span class="red">@Messages(constants.Form.PEG_HASH)</span>: @buyNegotiation.assetPegHash <br>
                    <span class="red">@Messages(constants.Form.BID)</span>: @buyNegotiation.bid <br>
                    <span class="red">@Messages(constants.Form.TIME)</span>: @buyNegotiation.time <br>
                    <button onclick="showHideByID('traderBuyNegotiationDetails@trader.id')">@Messages(constants.Form.SHOW_HIDE)</button>
                    <div class="hidden" id="traderBuyNegotiationDetails@trader.id">
                        <span class="red">@Messages(constants.Form.BUYER_ADDRESS)</span>: @buyNegotiation.buyerAddress <br>
                        <span class="red">@Messages(constants.Form.SELLER_ADDRESS)</span>: @buyNegotiation.sellerAddress <br>
                        <span class="red">@Messages(constants.Form.NEGOTIATION_ID)</span>: @buyNegotiation.id <br>
                        <span class="red">@Messages(constants.Form.BUYER_SIGNATURE)</span>: @buyNegotiation.buyerSignature <br>
                        <span class="red">@Messages(constants.Form.SELLER_SIGNATURE)</span>: @buyNegotiation.sellerSignature <br>
                        <span class="red">@Messages(constants.Form.BUYER_BLOCK_HEIGHT)</span>: @buyNegotiation.buyerBlockHeight <br>
                        <span class="red">@Messages(constants.Form.SELLER_BLOCK_HEIGHT)</span>: @buyNegotiation.sellerBlockHeight <br>
                        <span class="red">@Messages(constants.Form.BUYER_CONTRACT_HASH)</span>: @buyNegotiation.buyerContractHash <br>
                        <span class="red">@Messages(constants.Form.SELLER_CONTRACT_HASH)</span>: @buyNegotiation.sellerContractHash <br>
                    </div>
                </div>
            </div>
        }
        <br>
        <span class="centerText">@Messages(constants.Form.ON_GOING_SELL_NEGOTIATIONS): </span><br>
        @for(sellNegotiation <- sellNegotiations) {
            <div class="flexItem box thirdBox lightBlue">
                <div class="leftText">
                    <span class="red">@Messages(constants.Form.PEG_HASH)</span>: @sellNegotiation.assetPegHash <br>
                    <span class="red">@Messages(constants.Form.BID)</span>: @sellNegotiation.bid <br>
                    <span class="red">@Messages(constants.Form.TIME)</span>: @sellNegotiation.time <br>
                    <button onclick="showHideByID('traderSellNegotiationDetails@trader.id')">@Messages(constants.Form.SHOW_HIDE)</button>
                    <div class="hidden" id="traderSellNegotiationDetails@trader.id">
                        <span class="red">@Messages(constants.Form.BUYER_ADDRESS)</span>: @sellNegotiation.buyerAddress <br>
                        <span class="red">@Messages(constants.Form.SELLER_ADDRESS)</span>: @sellNegotiation.sellerAddress <br>
                        <span class="red">@Messages(constants.Form.NEGOTIATION_ID)</span>: @sellNegotiation.id <br>
                        <span class="red">@Messages(constants.Form.BUYER_SIGNATURE)</span>: @sellNegotiation.buyerSignature <br>
                        <span class="red">@Messages(constants.Form.SELLER_SIGNATURE)</span>: @sellNegotiation.sellerSignature <br>
                        <span class="red">@Messages(constants.Form.BUYER_BLOCK_HEIGHT)</span>: @sellNegotiation.buyerBlockHeight <br>
                        <span class="red">@Messages(constants.Form.SELLER_BLOCK_HEIGHT)</span>: @sellNegotiation.sellerBlockHeight <br>
                        <span class="red">@Messages(constants.Form.BUYER_CONTRACT_HASH)</span>: @sellNegotiation.buyerContractHash <br>
                        <span class="red">@Messages(constants.Form.SELLER_CONTRACT_HASH)</span>: @sellNegotiation.sellerContractHash <br>
                    </div>
                </div>
            </div>
        }
    </div>
    <br>

    <div id="traderOrderDetails@trader.id">
        <span class="centerText">@Messages(constants.Form.ON_GOING_BUY_ORDERS): </span><br>
        @for(buyOrder <- buyOrders) {
            <div class="flexItem box thirdBox lightBlue">
                <div class="leftText">
                    <span class="red">@Messages(constants.Form.ID)</span>: @buyOrder.id <br>
                    <span class="red">@Messages(constants.Form.AWB_PROOF_HASH)</span>: @buyOrder.awbProofHash <br>
                    <span class="red">@Messages(constants.Form.FIAT_PROOF_HASH)</span>: @buyOrder.fiatProofHash <br>
                </div>
            </div>
        }
        <br>
        <span class="centerText">@Messages(constants.Form.ON_GOING_SELL_ORDERS): </span><br>
        @for(sellOrder <- sellOrders) {
            <div class="flexItem box thirdBox lightBlue">
                <div class="leftText">
                    <span class="red">@Messages(constants.Form.ID)</span>: @sellOrder.id <br>
                    <span class="red">@Messages(constants.Form.AWB_PROOF_HASH)</span>: @sellOrder.awbProofHash <br>
                    <span class="red">@Messages(constants.Form.FIAT_PROOF_HASH)</span>: @sellOrder.fiatProofHash <br>
                </div>
            </div>
        }
    </div>
}