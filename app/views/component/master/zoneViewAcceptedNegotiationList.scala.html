@import controllers.actions.LoginState
@import views.html.base._
@import models.master.Negotiation
@import models.master.Asset
@import models.master.Trader

@(negotiationList: Seq[Negotiation],counterPartyTraders:Seq[Trader], assets: Seq[Asset])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState = null)

@negotiationList.map { negotiation =>
    <li class="commonList">

        @commonVerticalTextInfo(constants.View.BUYER_TRADER_ID, negotiation.buyerTraderID)
        @commonVerticalTextInfo(constants.View.SELLER_TRADER_ID, negotiation.sellerTraderID)
        @counterPartyTraders.find(_.id == negotiation.buyerTraderID) match {
            case Some(trader) => {
                @commonTextInfo(constants.View.BUYER_ORGANIZATION_ID, trader.organizationID)
            }
            case None => {}
        }
        @counterPartyTraders.find(_.id == negotiation.sellerTraderID) match {
            case Some(trader) => {
                @commonTextInfo(constants.View.SELLER_ORGANIZATION_ID, trader.organizationID)
            }
            case None => {}
        }

        @assets.find(_.id == negotiation.assetID) match {
            case Some(asset) => {
                @commonTextInfo(constants.View.ASSET_TYPE, asset.assetType)
            }
            case None => {}
        }
        @commonVerticalIntInfo(constants.View.PRICE, negotiation.price)
        @commonVerticalTextInfo(constants.View.QUANTITY, Seq(negotiation.quantity.toString, negotiation.quantityUnit).mkString(" "))
        @commonVerticalTextInfo(constants.View.LOAD_PORT, negotiation.assetOtherDetails.shippingDetails.portOfLoading)
        @commonVerticalTextInfo(constants.View.DISCHARGE_PORT, negotiation.assetOtherDetails.shippingDetails.portOfDischarge)
        @commonVerticalTextInfo(constants.View.STATUS, negotiation.status)
        <div class="listItemChild">
            <p class="listItemChildTitle">
            @Messages(constants.View.ACTION)
            </p>
            <p class="listItemChildValue">
                <button class="cmuk-button cmuk-button-primary cmuk-button-small">
                    <a class="cmuk-link secondaryFont" href="@routes.ViewController.tradeRoom(negotiation.id)">@Messages(constants.View.GO_TO_TRADE_ROOM)</a>
                </button>
            </p>
        </div>
    </li>
}
