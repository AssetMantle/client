@import controllers.actions.LoginState
@import views.html.base._
@import models.master.Negotiation
@import models.master.Asset
@import models.master.Trader

@(rejectedNegotiationList: Seq[Negotiation], failedNegotiationList: Seq[Negotiation], assets: Seq[Asset], counterPartyTraders: Seq[Trader])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState = null)

<div class="cmuk-text-left title">@Messages(constants.View.REJECTED_NEGOTIATION_LIST)</div>
@rejectedNegotiationList.map { rejectedNegotiation =>
    <li class="commonList">
        @defining(counterPartyTraders.filter(_.id == rejectedNegotiation.buyerTraderID).headOption) { counterPartyTrader: Option[Trader] =>
            @counterPartyTrader match {
                case Some(trader) => {
                    @commonVerticalTextInfo(constants.View.TRADER_NAME, trader.name)
                }
                case None => {
                    @commonVerticalTextInfo(constants.View.TRADER_ID, rejectedNegotiation.buyerTraderID)
                }
            }
        }
        @defining(assets.filter(_.id == rejectedNegotiation.assetID).headOption) { rejectedNegotiationAsset: Option[Asset] =>
          @rejectedNegotiationAsset match {
              case Some(asset) => {
                  @commonVerticalTextInfo(constants.View.ASSET_DESCRIPTION, asset.description)
              }
              case None => {
                  @commonVerticalTextInfo(constants.View.ASSET_ID, rejectedNegotiation.assetID)
              }
          }
        }
        @commonVerticalIntInfo(constants.View.PRICE, rejectedNegotiation.price)
        @commonVerticalTextInfo(constants.View.QUANTITY, Seq(rejectedNegotiation.quantity.toString(), rejectedNegotiation.quantityUnit).mkString(" "))
        @commonVerticalTextInfo(constants.View.COMMENT, rejectedNegotiation.comment.getOrElse(""))
        @commonVerticalTextInfo(constants.View.STATUS, rejectedNegotiation.status)
    </li>
}
<div class="cmuk-text-left title">@Messages(constants.View.FAILED_NEGOTIATION_LIST)</div>
@failedNegotiationList.map { failedNegotiation =>
    <li class="commonList">
        @defining(counterPartyTraders.filter(_.id == failedNegotiation.buyerTraderID).headOption) { counterPartyTrader: Option[Trader] =>
            @counterPartyTrader match {
                case Some(trader) => {
                    @commonVerticalTextInfo(constants.View.TRADER_NAME, trader.name)
                }
                case None => {
                    @commonVerticalTextInfo(constants.View.TRADER_ID, failedNegotiation.buyerTraderID)
                }
            }
        }
        @defining(assets.filter(_.id == failedNegotiation.assetID).headOption) { rejectedNegotiationAsset: Option[Asset] =>
            @rejectedNegotiationAsset match {
                case Some(asset) => {
                    @commonVerticalTextInfo(constants.View.ASSET_DESCRIPTION, asset.description)
                }
                case None => {
                    @commonVerticalTextInfo(constants.View.ASSET_ID, failedNegotiation.assetID)
                }
            }
        }
        @commonVerticalIntInfo(constants.View.PRICE, failedNegotiation.price)
        @commonVerticalTextInfo(constants.View.QUANTITY, Seq(failedNegotiation.quantity.toString(), failedNegotiation.quantityUnit).mkString(" "))
        @commonVerticalTextInfo(constants.View.STATUS, failedNegotiation.status)
    </li>
}
