@import controllers.actions.LoginState
@import models.blockchain.Split
@import models.master.Asset
@import views.html.base._

@(splits: Seq[Split], allDenoms: Seq[String], assets: Seq[Asset])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState)

@commonCard(constants.View.ACCOUNT_SPLITS) {
    @commonFormButton(constants.Form.SPLIT_WRAP)
} {
    @splits.map { split =>
        @commonVerticalInfoBox() {
            @defining(if (allDenoms.contains(split.ownableID)) constants.Blockchain.Entity.WRAPPED_COIN else constants.Blockchain.Entity.ASSET) {entityType =>
                @commonVerticalTextInfo(constants.View.ID, split.ownableID)
                @commonVerticalTextInfo(constants.View.ENTITY_TYPE, entityType)
                @if(entityType == constants.Blockchain.Entity.ASSET) {
                    @commonVerticalTextInfo(constants.View.LABEL, assets.find(_.id == split.ownableID).fold("")(_.label.getOrElse("")))
                    @commonFormButton(constants.Form.UPSERT_ENTITY_LABEL, 'parameters -> s"'${split.ownableID}', '${entityType}'")
                }
                @commonVerticalTextInfo(constants.View.OWNER_ID, split.ownerID)
                @commonVerticalDoubleInfo(constants.View.AMOUNT, split.split.toDouble)
                @commonFormButton(constants.Form.SPLIT_UNWRAP, 'parameters -> s"'${split.ownableID}', '${split.ownerID}'")
                @commonFormButton(constants.Form.SPLIT_SEND, 'parameters -> s"'${split.ownableID}', '${split.ownerID}'")
            }
        }
    }
}