@import controllers.actions.LoginState
@import views.html.base._
@import views.companion.master.SendChat

@import views.html.helper.form
@import views.html.helper.CSRF
@(sendChatForm: Form[SendChat.Data] = SendChat.form)(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, flash: Flash, configuration: play.api.Configuration, loginState: LoginState)

@form(action = constants.Form.SEND_CHAT.route, 'onkeypress -> "submitChatOnEnter(event,this)") {
    <fieldset class="cmuk-fieldset cmuk-form-stacked">
        @CSRF.formField
        <div style="position: relative">
        <div id="replyBox" style="display:none;" class="cmuk-flex replyBox">
           <div class="cmuk-flex" style="align-items:center">
            <div>
                <span cmuk-icon="icon: forward"></span>
            </div>
            <div>
                <div id="replyAccount" class="replyAccount"></div>
                <div id="replymessage" class="replyMessage"></div>
            </div>
           </div>
            <div>
                <a class="cmuk-icon-link" onclick="closeReply()" cmuk-icon="close"></a>
            </div>
        </div>
        @commonInputText(sendChatForm, constants.FormField.CHAT_WINDOW_ID, 'containerDivClass -> "hidden", 'readonly -> true, 'required -> true)
        <div class="hiddenLabel sendFormField">
        @commonInputText(sendChatForm, constants.FormField.MESSAGE)
            <button type="button" class="cmuk-button sendIconButton" onclick="submitChat(this)"><svg class="icon"><use xlink:href="@routes.Assets.versioned("images/icons/icons.svg#icon-telegram")"/></svg></button>
        </div>
        @commonInputText(sendChatForm, constants.FormField.REPLY_TO_CHAT,'containerDivClass -> "hidden", 'required -> false)
        </div>
        @if(sendChatForm.hasGlobalErrors) {
            <ul class="signupErrorList">
            @for(error <- sendChatForm.globalErrors) {
                <li class="error">@error.format</li>
            }
            </ul>
        }

    </fieldset>
}