@import controllers.actions.LoginState
@import views.html.base._
@import models.master.Negotiation
@import models.master.Asset
@import models.master.Trader

@import models.master.Order
@(negotiation: Negotiation, asset: Map[String,Option[String]], order: Option[Order])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, loginState: LoginState = null)

@commonCard(constants.View.ORDER_ACTIONS,  'cardIconPath -> "images/icons/icons.svg#orderActions"){
}{
    @if(asset.getOrElse(constants.Property.MODERATED.dataName,"") == "true"){
        @negotiation.status match {
            case constants.Status.Negotiation.BOTH_PARTIES_CONFIRMED  => {
                @order match {
                    case Some(order)=> {
                        <div class="cmuk-position-center">
                         @if(order.status.isEmpty)   {
                             @commonFormButton(constants.Form.ORDER_TAKE, 'parameters -> s"'${negotiation.id}'")
                         }
                        </div>
                    }
                    case None=>{<div class="cmuk-position-center">@commonFormButton(constants.Form.ORDER_MAKE, 'parameters -> s"'${negotiation.assetID}'")</div>}
                }
            }
            case _=>{<div class="cmuk-position-center">@commonFormButton(constants.Form.RELEASE_ASSET, 'parameters -> s"'${negotiation.assetID}'")</div>}
        }
    }


}
