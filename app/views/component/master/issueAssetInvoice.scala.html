@import controllers.actions.LoginState
@import helper._
@import models.masterTransaction
@import views.companion.master.IssueAssetInvoice

@(issueAssetInvoiceForm: Form[IssueAssetInvoice.Data], file: Option[masterTransaction.AssetFile] = None)(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, flash: Flash, loginState: LoginState = null)

<div class="latest_card-header latest_card-header-primary text-center">
    <h4 class="latest_card-title">@Messages(constants.Form.DOCUMENTS)</h4>
</div>

<div class="centerText">
    <div id="upload@constants.File.INVOICE">
        <button onclick="getForm(jsRoutes.controllers.FileController.uploadTraderAssetForm('@constants.File.INVOICE', '@issueAssetInvoiceForm.data(constants.FormField.REQUEST_ID.name)'))">@Messages(constants.Form.UPLOAD) @Messages(constants.File.INVOICE)</button>
    </div>
    @if(file.isDefined) {
        @component.master.commonDocumentViewer(file.get) {
            @routes.FileController.tradingFile(file.get.id, file.get.fileName, file.get.documentType)
        } {
            <a href="@routes.FileController.tradingFile(file.get.id, file.get.fileName, file.get.documentType)">@Messages(file.get.documentType)</a>
        } {
            <button onclick="getForm(jsRoutes.controllers.File.updateTraderAssetForm('@file.get.documentType', '@file.get.id'))">@Messages(constants.Form.UPDATE) @Messages(file.get.documentType)</button>
            <script>hideElement('upload@file.get.documentType')</script>
        }
    }
</div>

@form(action = routes.IssueAssetController.issueAssetInvoice(), 'onkeypress -> "submitFormOnEnter(event,this)") {
    @CSRF.formField
        <div class="latest_card-body ml-cb">
            @inputText(issueAssetInvoiceForm(constants.FormField.REQUEST_ID.name), '_label -> Messages(constants.FormField.REQUEST_ID.name), 'class -> "form-control", 'placeholder -> Messages(constants.FormField.REQUEST_ID.name), 'required -> true)
            @inputText(issueAssetInvoiceForm(constants.FormField.INVOICE_NUMBER.name), '_label -> Messages(constants.FormField.INVOICE_NUMBER.name), 'class -> "form-control", 'placeholder -> Messages(constants.FormField.INVOICE_NUMBER.name), 'required -> true)
            @inputDate(issueAssetInvoiceForm(constants.FormField.INVOICE_DATE.name), '_label -> Messages(constants.FormField.INVOICE_DATE.name), 'class -> "form-control", 'placeholder -> Messages(constants.FormField.INVOICE_DATE.name), '_name -> Messages(constants.FormField.INVOICE_DATE.name), 'required -> true)

            @if(issueAssetInvoiceForm.hasGlobalErrors) {
                <ul>
                @for(error <- issueAssetInvoiceForm.globalErrors) {
                    <li>@error.format</li>
                }
                </ul>
            }
            @if(file.isDefined){
            <button type="button" class="btn btn-primary btn-sm" onclick="submitForm(this)">@Messages(constants.Form.ISSUE_ASSET_INVOICE)</button>
            } else {
            <button type="button" class="btn btn-primary btn-sm" onclick="submitForm(this)" disabled="disabled">@Messages(constants.Form.ISSUE_ASSET_INVOICE)</button>
            }
        </div>
}
