@import controllers.actions.LoginState
@import models.master.Organization
@import play.api.Logger
@import views.html.base._
@import views.html.component.master.streetAddress

@(organizationVerificationRequests: Seq[Organization])(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider, module: String, logger: Logger, loginState: LoginState = null)
<div class="cmuk-container">
    <div class="cmuk-flex-center cmuk-child-width-auto cmuk-grid-match" cmuk-grid>
        @if(organizationVerificationRequests.isEmpty){
            <span>@Messages(constants.View.NO_REQUESTS_FOUND)</span>
        }
        @for(organizationVerificationRequest <- organizationVerificationRequests) {
            <div>
            @commonCard(organizationVerificationRequest.id) {
            } {
                    <div class="cmuk-text-left title">@Messages(constants.Form.ORGANIZATION_DETAILS)</div>
                    @commonTextInfo(constants.Form.ORGANIZATION_ID, organizationVerificationRequest.id)
                    @commonTextInfo(constants.Form.ZONE_ID, organizationVerificationRequest.zoneID)
                    @commonTextInfo(constants.Form.ACCOUNT_ID, organizationVerificationRequest.accountID)
                    @commonTextInfo(constants.Form.NAME, organizationVerificationRequest.name)
                    @commonTextInfo(constants.Form.ABBREVIATION, organizationVerificationRequest.abbreviation.getOrElse(""))
                    @commonDateInfo(constants.Form.ESTABLISHMENT_DATE, organizationVerificationRequest.establishmentDate)
                    @commonTextInfo(constants.Form.EMAIL, organizationVerificationRequest.email)

                    <div class="cmuk-text-left title">@Messages(constants.FormField.REGISTERED_ADDRESS.name) </div>
                    @streetAddress(organizationVerificationRequest.registeredAddress)
                    <div class="cmuk-text-left title">@Messages(constants.FormField.POSTAL_ADDRESS.name) </div>
                    @streetAddress(organizationVerificationRequest.postalAddress)
                    <div class="cmuk-text-left title">@Messages(constants.View.ORGANIZATION_UBO_DETAIL)</div>
                    @for(ubo <- organizationVerificationRequest.ubos.data) {
                        @commonTextInfo(constants.View.PERSON_NAME, ubo.personName)
                        @commonDoubleInfo(constants.View.SHARE_PERCENTAGE, ubo.sharePercentage)
                        @commonTextInfo(constants.View.RELATIONSHIP, ubo.relationship)
                        @commonTextInfo(constants.View.TITLE, ubo.title)
                    }
                    <div class="cmuk-text-left title">@Messages(constants.Form.DOCUMENTS): </div>
                    <div id = "organizationKYCDocuments@organizationVerificationRequest.accountID" class="kycDocumentsView">
                    <script>componentResource('organizationKYCDocuments@organizationVerificationRequest.accountID', jsRoutes.controllers.AddOrganizationController.viewKYCDocuments('@organizationVerificationRequest.id'))</script>
                    </div>
                    <button type="button" class="cmuk-button cmuk-button-success cmuk-button-small" onclick="getForm(jsRoutes.controllers.BackgroundCheckController.uploadOrUpdateOrganizationBackgroundCheckFile('@organizationVerificationRequest.id'))">@Messages(constants.Form.APPROVE)</button>
                    <button type="button" class="cmuk-button cmuk-button-danger cmuk-button-small" onclick="getForm(jsRoutes.controllers.AddOrganizationController.rejectVerifyOrganizationRequestForm('@organizationVerificationRequest.id'))">@Messages(constants.Form.REJECT)</button>
                }
            </div>
        }
    </div>
</div>


